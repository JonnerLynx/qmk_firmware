// #include "ergodox.h"
// #include "debug.h"
// #include "action_layer.h"
#include QMK_KEYBOARD_H

#define L0 0
#define L1 1
#define L2 2
#define L3 3
#define L4 4
#define L5 5
#define L6 6
#define L7 7

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

/* Layer 0
 *
 * .---------------------------------------------------------------------------.          .---------------------------------------------------------------------------.
 * |       ~       |    !    |    @    |    #    |    $    |    %    |         |          |         |    ^    |    &    |    *    |    (    |    )    |       |       |
 * |       `       |    1    |    2    |    3    |    4    |    5    |         |          |         |    6    |    7    |    8    |    9    |    0    |       \       |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |---------------+---------+---------+---------+---------+---------+---------|          |---------+---------+---------+---------+---------+---------+---------------|
 * |       ⇥       |    "    |    <    |    >    |    P    |    Y    |         |          |         |    F    |    G    |    C    |    R    |    L    |       ?       |
 * |      Tab      |    '    |    ,    |    .    |    p    |    y    |         |          |         |    f    |    g    |    c    |    r    |    l    |       /       |
 * |               |         |         |         |         |         |  TO:L1  |          |  TO:L1  |         |         |         |         |         |               |
 * |---------------+---------+---------+---------+---------+---------|         |          |         |---------+---------+---------+---------+---------+---------------|
 * |       ⇪       |    A    |    O    |    E    |    U    |    I    |         |          |         |    D    |    H    |    T    |    N    |    S    |       _       |
 * |   Caps Lock   |    a    |    o    |    e    |    u    |    i    |---------|          |---------|    d    |    h    |    t    |    n    |    s    |       -       |
 * |               |  LT:L5  |  LT:L4  |  LT:L3  |  LT:L2  |         |         |          |         |         |         |         |         |         |               |
 * |---------------+---------+---------+---------+---------+---------|         |          |         |---------+---------+---------+---------+---------+---------------|
 * |       ⇧       |    :    |    Q    |    J    |    K    |    X    |         |          |         |    B    |    M    |    W    |    V    |    Z    |       ⇧       |
 * |     Shift     |    ;    |    q    |    j    |    k    |    x    |         |          |         |    b    |    m    |    w    |    v    |    z    |     Shift     |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * '---------------+---------+---------+---------+---------+---------'---------'          '---------'---------+---------+---------+---------+---------+---------------|
 *       |    ⌘    |         |         |         |         |                                                  |    {    |    }    |    +    |         |       ⌘       |
 *       | Command |  OSL:L1 |   ⌘-X   |   ⌘-C   |   ⌘-V   |                                                  |    [    |    ]    |    =    |  OSL:L1 |    Command    |
 *       |         |         |         |         |         |                                                  |         |         |         |         |               |
 *       '-------------------------------------------------'                                                  '-------------------------------------------------------'
 *
 *                                                         .-------------------.          .-------------------.
 *                                                         |         |         |          |         |         |
 *                                                         |         |         |          |         |         |
 *                                                         |         |         |          |         |         |
 *                                               .---------+---------+---------|          |---------+---------+---------.
 *                                               |         |         |         |          |         |         |         |
 *                                               |    ␣    |    ⌫    |         |          |         |    ⎋    |    ⏎    |
 *                                               |         |         |         |          |         |         |         |
 *                                               |  Space  |Backspace|---------|          |---------|  Escape |  Return |
 *                                               |  LT:L6  |         |         |          |         |         |         |
 *                                               |         |         |         |          |         |         |         |
 *                                               |         |         |         |          |         |         |         |
 *                                               '-----------------------------'          '-----------------------------'
 */

[L0] = LAYOUT_ergodox(
        
    // Left Hand
    KC_GRV,             KC_1,           KC_2,           KC_3,           KC_4,           KC_5,           KC_TRNS,
    KC_TAB,             KC_QUOT,        KC_COMM,        KC_DOT,         KC_P,           KC_Y,           TO(L1),
    KC_CAPS,            LT(L5, KC_A),   LT(L4, KC_O),   LT(L3, KC_E),   LT(L2, KC_U),   KC_I,           /**/
    KC_LSFT,            KC_SCLN,        KC_Q,           KC_J,           KC_K,           KC_X,           KC_NO,  
    KC_LCMD,            OSL(L1),        LCMD(KC_X),     LCMD(KC_C),     LCMD(KC_V),     /**/            /**/

                                                                                        KC_TRNS,        KC_TRNS,
                                                                                        /**/            KC_TRNS,
                                                                        LT(L6, KC_SPC), KC_BSPC,        KC_TRNS,

    // Right Hand
    KC_TRNS,            KC_6,           KC_7,           KC_8,           KC_9,           KC_0,           KC_BSLS,
    TO(L1),             KC_F,           KC_G,           KC_C,           KC_R,           KC_L,           KC_SLSH,
    /**/                KC_D,           KC_H,           KC_T,           KC_N,           KC_S,           KC_MINS,
    KC_NO,              KC_B,           KC_M,           KC_W,           KC_V,           KC_Z,           KC_RSFT,
    /**/                /**/            KC_LBRC,        KC_RBRC,        KC_EQL,         OSL(L1),        KC_RCMD,

    KC_TRNS,            KC_TRNS,
    KC_TRNS,            /**/
    KC_TRNS,            KC_ESC,        KC_ENT

),

/* Layer 1
 *
 * .---------------------------------------------------------------------------.          .---------------------------------------------------------------------------.
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |---------------+---------+---------+---------+---------+---------+---------|          |---------+---------+---------+---------+---------+---------+---------------|
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |               |         |         |         |         |         |    L2   |          |    L2   |         |         |         |         |         |               |
 * |---------------+---------+---------+---------+---------+---------|         |          |         |---------+---------+---------+---------+---------+---------------|
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |               |         |         |         |         |         |---------|          |---------|         |         |         |         |         |               |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |---------------+---------+---------+---------+---------+---------|         |          |         |---------+---------+---------+---------+---------+---------------|
 * |               |         |         |         |         |         |    L0   |          |    L0   |         |         |         |         |         |               |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * |               |         |         |         |         |         |         |          |         |         |         |         |         |         |               |
 * '---------------+---------+---------+---------+---------+---------'---------'          '---------'---------+---------+---------+---------+---------+---------------|
 *       |         |    ⇧    |    ⌃    |    ⌥    |    ⌘    |                                                  |    ⌘    |    ⌥    |    ⌃    |    ⇧    |               |
 *       |         |  Shift  | Control |  Option | Command |                                                  | Command |  Option | Control |  Shift  |               |
 *       |         |         |         |         |         |                                                  |         |         |         |         |               |
 *       '-------------------------------------------------'                                                  '-------------------------------------------------------'
 *
 *                                                         .-------------------.          .-------------------.
 *                                                         |         |         |          |         |         |
 *                                                         |         |         |          |         |         |
 *                                                         |         |         |          |         |         |
 *                                               .---------+---------+---------|          |---------+---------+---------.
 *                                               |         |         |         |          |         |         |         |
 *                                               |         |         |         |          |         |         |         |
 *                                               |         |         |         |          |         |         |         |
 *                                               |         |         |---------|          |---------|         |         |
 *                                               |         |         |         |          |         |         |         |
 *                                               |         |         |         |          |         |         |         |
 *                                               |         |         |         |          |         |         |         |
 *                                               '-----------------------------'          '-----------------------------'
 */

[L1] = LAYOUT_ergodox(

    // Left Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        KC_TRNS,
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        TO(L2),
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        TO(L0),
    KC_TRNS,        KC_LSFT,        KC_LCTL,        KC_LOPT,       KC_LCMD,

                                                                                   KC_TRNS,        KC_TRNS,
                                                                                   /**/            KC_TRNS,
                                                                   KC_TRNS,        KC_TRNS,        KC_TRNS,

    // Right Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        KC_TRNS,
		TO(L2),         KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        KC_TRNS,
    /**/            KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        KC_TRNS,
    TO(L0),         KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        KC_TRNS,
    /**/            /**/            KC_RCMD,        KC_ROPT,       KC_RCTL,        KC_RSFT,        KC_TRNS,

    KC_TRNS,        KC_TRNS,
    KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS

),

/* Layer 2
 *
 * .--------------------------------------------------------------------------.          .--------------------------------------------------------------------------.
 * |              |         |         |         |         |         |         |          |         |         |         |         |         |         |              |
 * |              |   F1    |   F2    |   F3    |   F4    |   F5    |         |          |         |   F6    |   F7    |   F8    |   F9    |   F10   |     F11      |
 * |              |         |         |         |         |         |         |          |         |         |         |         |         |         |              |
 * |--------------+---------+---------+---------+---------+---------+---------|          |---------+---------+---------+---------+---------+---------+--------------|
 * |              |         | Command |         |         |         |         |          |         |         |         |         |         |         |              |
 * |              |         |    -    | Command |         |         |         |          |         |         |         |   Up    |         |         |     F12      |
 * |              |         |  Shift  |         |         |         |   L3    |          |   L3    |         |         |         |         |         |              |
 * |--------------+---------+---------+---------+---------+---------|         |          |         |---------+---------+---------+---------+---------+--------------|
 * |              |         | Option  |         |         |         |         |          |         |         |         |         |         |         |              |
 * |              |         |    -    | Option  |  [~LT]  |         +---------|          |---------+         |  Left   |  Down   |  Right  |   Tab   |              |
 * |              |         |  Shift  |         |         |         |         |          |         |         |         |         |         |         |              |
 * |--------------+---------+---------+---------+---------+---------|         |          |         |---------+---------+---------+---------+---------+--------------|
 * |              |         | Control |         |         |         |   L1    |          |   L1    |         |         |         |         |         |              |
 * |              |         |    -    | Control |         |         |         |          |         |         |         |         |         |         |              |
 * |              |         |  Shift  |         |         |         |         |          |         |         |         |         |         |         |              |
 * '--------------+---------+---------+---------+---------+---------'---------'          '---------'---------+---------+---------+---------+---------+--------------|
 *      |         |         |         |         |         |                                                  |         |         |         |         |              |
 *      |         |         |         |         |         |                                                  |         |         |         | 	       |              |
 *      |         |         |         |         |         |                                                  |         |         |         |         |              |
 *      '-------------------------------------------------'                                                  '------------------------------------------------------'
 *
 *                                                        .-------------------.          .-------------------.
 *                                                        |         |         |          |         |         |
 *                                                        |         |         |          |         |         |
 *                                                        |         |         |          |         |         |
 *                                              .---------+---------+---------|          |---------+---------+---------.
 *                                              |         |         |         |          |         |         |         |
 *                                              |         |         |         |          |         |         |         |
 *                                              |         |         |         |          |         |         |         |
 *                                              |         |         +---------|          |---------+         |         |
 *                                              |         |         |         |          |         |         |         |
 *                                              |         |         |         |          |         |         |         |
 *                                              |         |         |         |          |         |         |         |
 *                                              '-----------------------------'          '-----------------------------'
 */

[L2] = LAYOUT_ergodox(

    // Left Hand
    KC_ESC,         KC_F1,          KC_F2,          KC_F3,         KC_F4,          KC_F5,          KC_TRNS,
    KC_TRNS,        KC_TRNS,        LGUI(KC_LSFT),  KC_LGUI,       KC_TRNS,        KC_TRNS,        TO(L3),
    KC_TRNS,        KC_TRNS,        LALT(KC_LSFT),  KC_LALT,       KC_TRNS,        KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        LCTL(KC_LSFT),  KC_LCTL,       KC_TRNS,        KC_TRNS,        TO(L1),
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,

                                                                                   KC_TRNS,        KC_TRNS,
                                                                                   /**/            KC_TRNS,
                                                                   KC_TRNS,        KC_TRNS,        KC_TRNS,

    // Right Hand
    KC_TRNS,        KC_F6,          KC_F7,          KC_F8,         KC_F9,          KC_F10,         KC_F11,
    TO(L3),         KC_TRNS,        KC_TRNS,        KC_UP,         KC_TRNS,        KC_TRNS,        KC_F12,
    /**/            KC_TRNS,        KC_LEFT,        KC_DOWN,       KC_RIGHT,       KC_TAB,         KC_TRNS,
    TO(L1),         KC_TRNS,        KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        KC_TRNS,
    /**/            /**/            KC_TRNS,        KC_TRNS,       KC_TRNS,        KC_TRNS,        KC_TRNS,

    KC_TRNS,        KC_TRNS,
    KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS

),

/* Layer 3
 *
 * .------------------------------------------------------------------.                 .------------------------------------------------------------------.
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------+--------|                 |--------+--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |        |        |  Page  |        |            |
 * |            |        |        |        |        |        |        |                 |        |        | Insert |  Home  |   Up   |        |            |
 * |            |        |        |        |        |        |   L4   |                 |   L4   |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |        |        |  Page  |        |            |
 * |            |        |        |  [~LT] |        |        +--------|                 |--------+        | Delete |  End   |  Down  |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |   L2   |                 |   L2   |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * '------------+--------+--------+--------+--------+-----------------'                 '-----------------+--------+--------+--------+--------+------------|
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     '--------------------------------------------'                                                     '--------'--------'--------'--------'------------'
 *
 *                                                  .-----------------.                 .-----------------.
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                         .--------+--------+--------|                 |--------+--------+--------.
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        +--------|                 |--------+        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         '--------------------------'                 '--------------------------'
 */

[L3] = LAYOUT_ergodox(

    // Left Hand
    KC_TRNS,        KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,        KC_TRNS,
    KC_TRNS,        KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,        TO(L4),
    KC_TRNS,        KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,        TO(L2),
    KC_TRNS,        KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,

                                                                                                    KC_TRNS,        KC_TRNS,
                                                                                                    /**/            KC_TRNS,
                                                                                KC_TRNS,            KC_TRNS,        KC_TRNS,

    // Right Hand
    KC_TRNS,        KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,        KC_TRNS,
    TO(L4),         KC_TRNS,            KC_INS,             KC_HOME,            KC_PGUP,            KC_TRNS,        KC_TRNS,
    /**/            KC_TRNS,            KC_DEL,             KC_END,             KC_PGDN,            KC_TRNS,        KC_TRNS,
    TO(L2),         KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,        KC_TRNS,
    /**/            /**/                KC_TRNS,            KC_TRNS,            KC_TRNS,            KC_TRNS,        KC_TRNS,

    KC_TRNS,        KC_TRNS,
    KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,            KC_TRNS

),

/* Layer 4
 *
 * .------------------------------------------------------------------.                 .------------------------------------------------------------------.
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        | NUMLOCK|    /   |    *   |    -   |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------+--------|                 |--------+--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |    7   |    8   |    9   |    +   |            |
 * |            |        |        |        |        |        |   L5   |                 |   L5   |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |   ALT  |  [~LT] |        |        |        +--------|                 |--------+        |    4   |    5   |    6   |    +   |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |   L3   |                 |   L3   |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |    1   |    2   |    3   |  ENTER |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * '------------+--------+--------+--------+--------+-----------------'                 '-----------------+--------+--------+--------+--------+------------|
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |    0   |    0   |    .   |  ENTER |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     '--------------------------------------------'                                                     '--------'--------'--------'--------'------------'
 *
 *                                                  .-----------------.                 .-----------------.
 *                                                  |        |        |                 |        |        |
 *                                                  |        |  RESET |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                         .--------+--------+--------|                 |--------+--------+--------.
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        +--------|                 |--------+        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         '--------------------------'                 '--------------------------'
 */

[L4] = LAYOUT_ergodox(

    // Left Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        TO(L5),
    KC_TRNS,        KC_LALT,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        TO(L3),
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,

                                                                                    KC_TRNS,        RESET,
                                                                                    /**/            KC_TRNS,
                                                                    KC_TRNS,        KC_TRNS,        KC_TRNS,

    // Right Hand
    KC_TRNS,        KC_TRNS,        KC_NUMLOCK,     KC_KP_SLASH,    KC_KP_ASTERISK, KC_KP_MINUS,    KC_TRNS,
    TO(L5),         KC_TRNS,        KC_KP_7,        KC_KP_8,        KC_KP_9,        KC_KP_PLUS,     KC_TRNS,
    /**/            KC_TRNS,        KC_KP_4,        KC_KP_5,        KC_KP_6,        KC_KP_PLUS,     KC_TRNS,
    TO(L3),         KC_TRNS,        KC_KP_1,        KC_KP_2,        KC_KP_3,        KC_KP_ENTER,    KC_TRNS,
    /**/            /**/            KC_KP_0,        KC_KP_0,        KC_KP_DOT,      KC_KP_ENTER,    KC_TRNS,

    KC_TRNS,        KC_TRNS,
    KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS

),

/* Layer 5
 *
 * .------------------------------------------------------------------.                 .------------------------------------------------------------------.
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------+--------|                 |--------+--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |  Stop  | Select |        |            |
 * |            |        |        |        |        |        |   L6   |                 |   L6   |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |Previous|  Play/ |  Next  |        |            |
 * |            |  [~LT] |        |        |        |        +--------|                 |--------+        |  Track |  Pause |  Track |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |   L4   |                 |   L4   |        | Volume |        | Volume |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |  Down  |  Mute  |   Up   |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * '------------+--------+--------+--------+--------+-----------------'                 '-----------------+--------+--------+--------+--------+------------|
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     '--------------------------------------------'                                                     '--------'--------'--------'--------'------------'
 *
 *                                                  .-----------------.                 .-----------------.
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                         .--------+--------+--------|                 |--------+--------+--------.
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        +--------|                 |--------+        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         '--------------------------'                 '--------------------------'
 */

[L5] = LAYOUT_ergodox(

    // Left Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        TO(L6),
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        TO(L4),
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,

                                                                                    KC_TRNS,        KC_TRNS,
                                                                                    /**/            KC_TRNS,
                                                                    KC_TRNS,        KC_TRNS,        KC_TRNS,

    // Right Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    TO(L6),         KC_TRNS,        KC_TRNS,        KC_MSTP,        KC_MSEL,        KC_TRNS,        KC_TRNS,
    /**/            KC_TRNS,        KC_MPRV,        KC_MPLY,        KC_MNXT,        KC_TRNS,        KC_TRNS,
    TO(L4),         KC_TRNS,        KC_VOLD,        KC_MUTE,        KC_VOLU,        KC_TRNS,        KC_TRNS,
    /**/            /**/            KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,

    KC_TRNS,        KC_TRNS,
    KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS

),

/* Layer 6
 *
 * .------------------------------------------------------------------.                 .------------------------------------------------------------------.
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------+--------|                 |--------+--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |        |  Mouse |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |   Up   |        |        |            |
 * |            |        |        |        |        |        |   L7   |                 |   L7   |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |  Mouse |  Mouse |  L7,No |        |        |                 |        |        |  Mouse |  Mouse |  Mouse |        |            |
 * |            |        |  Accel |  Accel | [Mouse]|        +--------|                 |--------+        |  Left  |  Down  |  Right |        |            |
 * |            |        |    0   |    1   | [Wheel]|        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |   L5   |                 |   L5   |        |  Mouse |  Mouse |  Mouse |        |            |
 * |            |        |        |        |        |        |        |                 |        |        | Button | Button | Button |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |    1   |    3   |    2   |        |            |
 * '------------+--------+--------+--------+--------+-----------------'                 '-----------------+--------+--------+--------+--------+------------|
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     '--------------------------------------------'                                                     '--------'--------'--------'--------'------------'
 *
 *                                                  .-----------------.                 .-----------------.
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                         .--------+--------+--------|                 |--------+--------+--------.
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |  Mouse |  Mouse |
 *                                         |  [~LT] |        +--------|                 |--------+ Button | Button |
 *                                         |        |        |        |                 |        |    2   |    1   |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         '--------------------------'                 '--------------------------'
 */

[L6] = LAYOUT_ergodox(

    // Left Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        TO(L7),
    KC_TRNS,        KC_TRNS,        KC_MS_ACCEL0,   KC_MS_ACCEL1,   LT(L7, KC_NO),  KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        TO(L5),
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,

                                                                                    KC_TRNS,        KC_TRNS,
                                                                                    /**/            KC_TRNS,
                                                                    KC_TRNS,        KC_TRNS,        KC_TRNS,

    // Right Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    TO(L7),         KC_TRNS,        KC_TRNS,        KC_MS_UP,       KC_TRNS,        KC_TRNS,        KC_TRNS,
    /**/            KC_TRNS,        KC_MS_LEFT,     KC_MS_DOWN,     KC_MS_RIGHT,    KC_TRNS,        KC_TRNS,
    TO(L5),         KC_TRNS,        KC_MS_BTN1,     KC_MS_BTN3,     KC_MS_BTN2,     KC_TRNS,        KC_TRNS,
    /**/            /**/            KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,

    KC_TRNS,        KC_TRNS,   
    KC_TRNS,        /**/
    KC_MS_BTN3,     KC_MS_BTN2,     KC_MS_BTN1

),

/* Layer 7
 *
 * .------------------------------------------------------------------.                 .------------------------------------------------------------------.
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |------------+--------+--------+--------+--------+--------+--------|                 |--------+--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |        |  Mouse |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |  Wheel |        |        |            |
 * |            |        |        |        |        |        |   NO   |                 |   NO   |        |        |   Up   |        |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |        |                 |        |        |  Mouse |  Mouse |  Mouse |        |            |
 * |            |        |        |        |  [~LT] |        +--------|                 |--------+        |  Wheel |  Wheel |  Wheel |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |  Left  |  Down  |  Right |        |            |
 * |------------+--------+--------+--------+--------+--------|        |                 |        |--------+--------+--------+--------+--------+------------|
 * |            |        |        |        |        |        |   L6   |                 |   L6   |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * |            |        |        |        |        |        |        |                 |        |        |        |        |        |        |            |
 * '------------+--------+--------+--------+--------+-----------------'                 '-----------------+--------+--------+--------+--------+------------|
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     |        |        |        |        |        |                                                     |        |        |        |        |            |
 *     '--------------------------------------------'                                                     '--------'--------'--------'--------'------------'
 *
 *                                                  .-----------------.                 .-----------------.
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                                  |        |        |                 |        |        |
 *                                         .--------+--------+--------|                 |--------+--------+--------.
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |  [~LT] |        +--------|                 |--------+        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         |        |        |        |                 |        |        |        |
 *                                         '--------------------------'                 '--------------------------'
 */

[L7] = LAYOUT_ergodox(

    // Left Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_NO,
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        TO(L6),
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,

                                                                                    KC_TRNS,        KC_TRNS,
                                                                                    /**/            KC_TRNS,
                                                                    KC_TRNS,        KC_TRNS,        KC_TRNS,

    // Right Hand
    KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    KC_NO,          KC_TRNS,        KC_TRNS,        KC_MS_WH_UP,    KC_TRNS,        KC_TRNS,        KC_TRNS,
    /**/            KC_TRNS,        KC_MS_WH_LEFT,  KC_MS_WH_DOWN,  KC_MS_WH_RIGHT, KC_TRNS,        KC_TRNS,
    TO(L6),         KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,
    /**/            /**/            KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,        KC_TRNS,

    KC_TRNS,        KC_TRNS,
    KC_TRNS,        /**/
    KC_TRNS,        KC_TRNS,        KC_TRNS

)

};

/*
const uint16_t PROGMEM fn_actions[] = {
    [1] = ACTION_LAYER_TAP_TOGGLE(ARROW_LAYER) // FN1 - Momentary Arrow Layer
};
*/

const macro_t *action_get_macro(keyrecord_t *record, uint8_t id, uint8_t opt)
{
  // MACRODOWN only works in this function
      switch(id) {
        case 0:
        if (record->event.pressed) {
          register_code(KC_RSFT);
        } else {
          unregister_code(KC_RSFT);
        }
        break;
      }
    return MACRO_NONE;
}

// just one time when the keyboard initializes.
void matrix_init_user(void) {
};

// Runs constantly in the background, in a loop.
void matrix_scan_user(void) {

    static uint8_t previous_layer = L0;
    uint8_t current_layer = biton32(layer_state);

    // Not sure what this call does.
    ergodox_board_led_off();

    if (current_layer != previous_layer) {
        ergodox_right_led_1_off();
        ergodox_right_led_2_off();
        ergodox_right_led_3_off();

        // Binary LED Encoding
        switch (current_layer) {
            case L0:
                // No LEDs
                break;
            case L1:
                ergodox_right_led_1_on();
                break;
            case L2:
                ergodox_right_led_2_on();
                break;
            case L3:
                ergodox_right_led_1_on();
                ergodox_right_led_2_on();
                break;
            case L4:
                ergodox_right_led_3_on();
                break;
            case L5:
                ergodox_right_led_3_on();
                ergodox_right_led_1_on();
                break;
            case L6:
                ergodox_right_led_3_on();
                ergodox_right_led_2_on();
                break;
            case L7:
                ergodox_right_led_3_on();
                ergodox_right_led_2_on();
                ergodox_right_led_1_on();
            default:
                break;
        }

        previous_layer = current_layer;
    }
};

